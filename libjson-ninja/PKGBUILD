# Maintainer: Mathis Antony <sveitser@gmail.com>
pkgname=libjson-ninja
pkgver=7.6.1
pkgrel=1
epoch=
pkgdesc="A JSON reader and writer which is super-effiecient and usually runs
circles around other JSON libraries."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/libjson"
license=('custom')
groups=()
depends=()
makedepends=('unzip')
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://sourceforge.net/projects/libjson/files/libjson\_$pkgver.zip)
noextract=(libjson\_$pkgver.zip)
md5sums=('82f3fcbf9f8cf3c4e25e1bdd77d65164')

build() {
  cd $srcdir
  unzip -o "libjson_$pkgver.zip" 
  cd libjson
  sed -i.bak '/#define JSON_LIBRARY/d' JSONOptions.h
  sed -i.bak '/#define JSON_BINARY/d' JSONOptions.h
  sed -i.bak '/#define JSON_EXPOSE_BASE64/d' JSONOptions.h
  sed -i.bak '/#ifdef JSON_DEBUG/,+17d' _internal/Source/JSONDefs.h
  unset CXXFLAGS
  make
}

package() {
  cd "$srcdir/libjson"
  unset CXXFLAGS
  sed -i.bak '/cp -rv $(srcdir)\/Dependencies\/ $(include_path)\/$(libname_hdr)\/$(srcdir)/d' \
    makefile 
  make install prefix="$pkgdir/usr" 
  rm "$pkgdir/usr/lib"
}

# vim:set ts=2 sw=2 et:
